{"ast":null,"code":"import React,{useState}from'react';import{getFirestore,collection,addDoc,serverTimestamp,query,where,getDocs}from'firebase/firestore';import app from'../firebaseConfig';import'./WaitlistForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const db=getFirestore(app);const WaitlistForm=_ref=>{let{inputRef}=_ref;const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage('');setError('');try{// Check if email already exists\nconst q=query(collection(db,'waitlist'),where('email','==',email));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){setError('This email is already on the waitlist.');setLoading(false);return;}await addDoc(collection(db,'waitlist'),{email,createdAt:serverTimestamp()});setMessage(\"Thank you! You're on the list.\");setEmail('');}catch(err){setError('Something went wrong. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"waitlist-form-container\",children:[!message&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Enter your email\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Joining...':'Join waitlist'})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error})]});};export default WaitlistForm;","map":{"version":3,"names":["React","useState","getFirestore","collection","addDoc","serverTimestamp","query","where","getDocs","app","jsx","_jsx","jsxs","_jsxs","db","WaitlistForm","_ref","inputRef","email","setEmail","loading","setLoading","message","setMessage","error","setError","handleSubmit","e","preventDefault","q","querySnapshot","empty","createdAt","err","className","children","onSubmit","ref","type","value","onChange","target","placeholder","required","disabled"],"sources":["C:/Users/hp/Desktop/clufree_web/frontend/src/components/WaitlistForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs } from 'firebase/firestore';\r\nimport app from '../firebaseConfig';\r\nimport './WaitlistForm.css';\r\n\r\nconst db = getFirestore(app);\r\n\r\nconst WaitlistForm = ({ inputRef }) => {\r\n    const [email, setEmail] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setMessage('');\r\n        setError('');\r\n\r\n        try {\r\n            // Check if email already exists\r\n            const q = query(collection(db, 'waitlist'), where('email', '==', email));\r\n            const querySnapshot = await getDocs(q);\r\n            if (!querySnapshot.empty) {\r\n                setError('This email is already on the waitlist.');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            await addDoc(collection(db, 'waitlist'), {\r\n                email,\r\n                createdAt: serverTimestamp(),\r\n            });\r\n            setMessage(\"Thank you! You're on the list.\");\r\n            setEmail('');\r\n        } catch (err) {\r\n            setError('Something went wrong. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"waitlist-form-container\">\r\n            {!message && (\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        placeholder=\"Enter your email\"\r\n                        required\r\n                    />\r\n                    <button type=\"submit\" disabled={loading}>\r\n                        {loading ? 'Joining...' : 'Join waitlist'}\r\n                    </button>\r\n                </form>\r\n            )}\r\n            {message && <p className=\"success-message\">{message}</p>}\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WaitlistForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}